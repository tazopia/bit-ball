var showMessage=errorMessage=function(c){alert(c)},path="/";try{path="/"+location.pathname.split("/")[1]}catch(c){}var login,scene=document.getElementById("background");try{var parallax=new Parallax(scene)}catch(c){}var checkUserid=!1,checkNickname=!1,checkPhone=!1,checkAccount=!1,checkRecommend=!1;$((function(){login={goLogin:function(){return""===$("#username").val()?(alert("아이디를 입력 하세요."),$("#username").focus(),!1):""===$("#password").val()?(alert("비밀번호를 입력 하세요."),$("#password").focus(),!1):($.ajax({url:"/login",data:{username:$("#username").val(),password:$("#password").val()}}).done((function(c){c.success?location.href=c.url:($("#username").val(""),$("#password").val(""),$("#username").focus())})),!1)},checkCode:function(){return""===$("#joinCode").val()?(alert("가입 코드를 입력하세요."),$("#joinCode").focus(),!1):($.ajax({url:path+"/code",data:{joinCode:$("#joinCode").val()}}).done((function(c){c.success?location.href=c.url:(joinCode.val(""),joinCode.focus())})),!1)},goJoin:function(){return!clicked&&(clicked=!0,checkUserid?checkNickname?$("#password").val().length<4?(alert("비밀번호는 최소 4자리 이상입니다."),$("#password").focus(),clicked=!1,!1):$("#password").val()!=$("#passwordConfirm").val()?(alert("비밀번호와 비밀번호 확인이 일치하지 않습니다."),$("#passwordConfirm").focus(),clicked=!1,!1):checkPhone?""==$("#bank").val()?(alert("은행을 선택하여 주세요."),clicked=!1,!1):""==$("#depositor").val()?(alert("예금주를 입력하여 주세요."),$("#depositor").focus(),clicked=!1,!1):config.duplicateAccount&&!checkAccount?(alert("사용가능한 계좌번호가 아닙니다."),$("#account").focus(),clicked=!1,!1):$("#account").val().length<6?(alert("계좌번호를 입력 하세요."),$("#account").focus(),clicked=!1,!1):$("#bankPassword").val().length<4?(alert("충환전 비밀번호는 4자리 이상입니다."),$("#bankPassword").focus(),clicked=!1,!1):$("#bankPassword").val()!=$("#bankPasswordConfirm").val()?(alert("충환전 비밀번호와  비밀번호 확인이 유효하지 않습니다."),$("#bankPasswordConfirm").focus(),clicked=!1,!1):config.requiredRecommend&&!checkRecommend?(alert("추천인 아이디를 확인할 수 없습니다."),$("#recommender").focus(),clicked=!1,!1):($.ajax({url:path+"/join",data:{userid:$("#userid").val(),nickname:$("#nickname").val(),password:$("#password").val(),phone:$("#phone").val(),bank:$("#bank").val(),depositor:$("#depositor").val(),account:$("#account").val(),bankPassword:$("#bankPassword").val(),code:$("#code").val(),recommender:$("#recommender").val()}}).done((function(c){c.success?location.href=c.url:clicked=!1})),!1):(alert("사용가능한 휴대폰이 아닙니다."),$("#phone").focus(),clicked=!1,!1):(alert("닉네임이 올바르지 않습니다."),$("#nickname").focus(),clicked=!1,!1):(alert("아이디가 올바르지 않습니다."),$("#userid").focus(),clicked=!1,!1))},checkFocus:function(c){c.removeClass("bul-ready bul-ok bul-error"),c.addClass("bul-ready")},checkEnabled:function(c){c.removeClass("bul-ready bul-ok bul-error"),c.addClass("bul-ok")},checkDisabled:function(c){c.removeClass("bul-ready bul-ok bul-error"),c.addClass("bul-error")}},$("#frm-join #userid").on("blur",(function(){$.post(path+"/userid",{userid:$("#userid").val()}).done((function(c){c.success&&$("#userid").val().length>3?(login.checkEnabled($("#bul-userid")),checkUserid=!0):(login.checkDisabled($("#bul-userid")),checkUserid=!1)}))})).on("focus",(function(){checkUserid=!1,login.checkFocus($("#bul-userid"))})).on("keyup",(function(){$("#userid").val($("#userid").val().userid())})),$("#frm-join #nickname").on("blur",(function(){$.post(path+"/nickname",{nickname:$("#nickname").val()}).done((function(c){c.success&&$("#nickname").val().length>1?(login.checkEnabled($("#bul-nickname")),checkNickname=!0):(login.checkDisabled($("#bul-nickname")),checkNickname=!1)}))})).on("focus",(function(){checkNickname=!1,login.checkFocus($("#bul-nickname"))})).on("keyup",(function(){$("#nickname").val($("#nickname").val().nickname())})),$("#frm-join #phone").on("blur",(function(){config.duplicatePhone?$.post(path+"/phone",{phone:$("#phone").val()}).done((function(c){c.success&&$("#phone").val().num().isMobile()?(checkPhone=!0,login.checkEnabled($("#bul-phone"))):(checkPhone=!1,login.checkDisabled($("#bul-phone")))})):checkPhone=!!$("#phone").val().num().isMobile()})).on("focus",(function(){checkPhone=!1,login.checkFocus($("#bul-phone"))})),config.duplicateAccount&&$("#frm-join #account").on("blur",(function(){$.post(path+"/account",{account:$("#account").val()}).done((function(c){c.success&&$("#account").val().length>6?(checkAccount=!0,login.checkEnabled($("#bul-account"))):(checkAccount=!1,login.checkDisabled($("#bul-account")))}))})).on("focus",(function(){checkAccount=!1,login.checkFocus($("#bul-account"))})),config.requiredRecommend&&$("#frm-join #recommender").on("blur",(function(){$.post(path+"/recommender",{recommender:$("#recommender").val()}).done((function(c){c.success?(checkRecommend=!0,login.checkEnabled($("#bul-recommend"))):(checkRecommend=!1,login.checkDisabled($("#bul-recommend")))}))})).on("focus",(function(){checkRecommend=!1,login.checkFocus($("#bul-recommend"))}))}));