var path="/";try{path=location.pathname.match(/^(\/.*?)\//)[1]}catch(e){}$((function(){var e=$("#flashMessage");""!==e.text().trim()&&setTimeout((function(){showMessage(e.text())}),10),$(".table-game input, .sel").on("focus",(function(){$(this).select()}));var t=$(".cal");t.calendar(),$("#sp-reset-date").on("click",(function(){t.val("")}))}));var popup={close:function(){try{opener.focus()}catch(e){}self.close()},reloadClose:function(){try{opener.location.reload(),opener.focus()}catch(e){}self.close()},sports:{add:function(){window.open(path+"/config/sports/add","popup-sports-add","width=800, height=300")},update:function(e){window.open(path+"/config/sports/update/"+e,"popup-sports-update","width=800, height=340")}},league:{add:function(){window.open(path+"/config/league/add","popup-league-add","width=800, height=310")},update:function(e){window.open(path+"/config/league/update/"+e,"popup-league-update","width=800, height=380")}},team:{update:function(e){window.open(path+"/config/team/update/"+e,"popup-team-update","width=800, height=300")}},game:{logger:function(e){window.open(path+"/game/logger/"+e,"popup-logger-"+e,"width=1200, height=600")},score:function(e){var t=$("#"+e);if($("tr").removeClass("result"),"result-box"==t.next().attr("id")&&$("#result-box").is(":visible"))$("#result-box").hide();else{t.addClass("result"),$("#result-box").insertAfter(t).show();var o=t.find(".sp-score").text().replace("-",":").split(":");$("#score-away").val(o[1].trim()),$("#score-cancel").prop("checked",!1),$("#score-home").val(o[0].trim()).focus(),$("#score-id").val(e)}},add:function(){window.open(path+"/game/popup/add","popup-game-add","width=1024, height=700")}},member:{add:function(){window.open(path+"/member/add","popup-member-add","width=1024, height=640")},dummy:function(){window.open(path+"/member/dummy","popup-member-dummy","width=800, height=440")},info:function(e){window.open(path+"/member/info/"+e,"popup-member-"+e,"width=1024, height=640")},login:function(e){alert("아이피")},currentUser:function(){window.open(path+"/member/currentUser","popup-current-user","width=1024, height=640")}},agency:{add:function(e){window.open(path+"/member/add?userid="+e,"popup-member-add","width=1024, height=640")}},customer:{memo:function(e){window.open(path+"/customer/memo/add/"+e,"popup-customer-memo","width=800, height=440")}},payment:{money:function(e){window.open(path+"/payment/money/"+e,"popup-money-"+e,"width=1200, height=740")},point:function(e){window.open(path+"/payment/point/"+e,"popup-point-"+e,"width=1200, height=740")},banking:function(e){window.open(path+"/payment/banking/"+e,"popup-banking-"+e,"width=1200, height=740")}},betting:{list:function(e){window.open(path+"/betting/popup/"+e,"popup-betting-"+e,"width=1400, height=740")},game:function(e,t){window.open(path+"/betting/"+t+"/"+e,t+"-"+e,"width=1400, height=740")},zone:function(e,t){window.open(path+"/betting/zone/"+e+"/"+t,e+"-"+t,"width=1400, height=740")},board:function(){window.open(path+"/betting/popup/board","popup-betting-board","width=1400, height=740")}},popup:{add:function(){window.open(path+"/customer/popup/add","popup-sports-add","width=800, height=340")},update:function(e){window.open(path+"/customer/popup/update/"+e,"popup-sports-update","width=800, height=800")}},notice:{add:function(){window.open(path+"/notice/add","popup-notice-add","width=800, height=400")},update:function(e){window.open(path+"/notice/update/"+e,"popup-notice-update","width=800, height=400")}}},search={payment:{userid:function(e){$("#username").val(e),$("#page").val(),$("#frm-search").submit()}}},payment={deposit:{submit:function(e){if(!confirm("입금을 확인하였습니다.\n\n입금 처리를 완료 합니다."))return!1;$.post(path+"/payment/deposit/submit",{id:e}).done((function(e){e.success&&location.reload()}))},cancel:function(e){if(!confirm("충전 신청을 취소합니다."))return!1;$.post(path+"/payment/deposit/cancel",{id:e}).done((function(e){e.success&&location.reload()}))},stop:function(e){$.post(path+"/payment/deposit/stop",{id:e}).done((function(e){e.success&&location.reload()}))},rollback:function(e){if(!confirm("충전완료 내역을 취소합니다.\n\n충전된 머니를 되돌립니다."))return!1;$.post(path+"/payment/deposit/rollback",{id:e}).done((function(e){e.success&&location.reload()}))}},withdraw:{submit:function(e){if(!confirm("지급을 완료하였습니다.\n\n환전 처리를 완료 합니다."))return!1;$.post(path+"/payment/withdraw/submit",{id:e,fees:$("#fees"+e).val()}).done((function(e){e.success&&location.reload()}))},rollback:function(e){if(!confirm("환전을 취소합니다.\n\n사용자 머니를 복구 합니다."))return!1;$.post(path+"/payment/withdraw/rollback",{id:e}).done((function(e){e.success&&location.reload()}))},stop:function(e){$.post(path+"/payment/withdraw/stop",{id:e}).done((function(e){e.success&&location.reload()}))}}},game={betEnabled:function(e,t){$.post(path+"/game/betEnabled",{gameId:e,betType:t}).done((function(o){$("#"+e+" [data-sports]").addClass("popup");var n=$("#"+e+' [data-bet="'+t+'"]');"Y"===o.value?n.addClass("btn01").text("베팅가능"):n.removeClass("btn01").text("베팅불가"),$("#"+e+" [data-auto]").removeClass("btn01").text("OFF")}))},autoUpdate:function(e){$.post(path+"/game/autoUpdate",{gameId:e}).done((function(t){$("#"+e+" [data-sports]").addClass("popup");var o=$("#"+e+" [data-auto]");"Y"===t.value?o.addClass("btn01").text("ON"):o.removeClass("btn01").text("OFF")}))},update:function(e){if(confirm("경기 시간 및 배당을 업데이트 하시겠습니까?")){var t=$("#"+e+' [name="date"]').val(),o=$("#"+e+' [name="hour"]').val(),n=$("#"+e+' [name="minute"]').val(),a=$("#"+e+' [name="oddsHome"]').val(),d=$("#"+e+' [name="oddsDraw"]').val(),i=$("#"+e+' [name="oddsAway"]').val(),s=$("#"+e+' [name="handicap"]').val();$.post(path+"/game/update",{gameId:e,date:t,hour:o,minute:n,oddsHome:a,oddsDraw:d,oddsAway:i,handicap:s}).done((function(t){t.success&&($("#"+e+" [data-sports]").addClass("popup"),$("#"+e+" [data-auto]").removeClass("btn01").text("OFF"))}))}},score:function(){var e=$("#score-id").val(),t=$("#score-home").val(),o=$("#score-away").val(),n=$("#score-cancel").is(":checked");if(!n&&(""==t||""==o))return alert("결과를 입력 하세요"),""==t?$("#score-home").focus():$("#score-away").focus(),!1;$.post(path+"/game/score",{id:e,scoreHome:t,scoreAway:o,cancel:n}).done((function(t){t.success&&($("#result-box").hide(),$("#"+e).hide())}))},oddsUp:function(e){var t=$("#"+e+' [name="oddsHome"]'),o=$("#"+e+' [name="oddsAway"]'),n=(parseFloat(t.val())||config.oddsDefault)+config.oddsUp,a=(parseFloat(o.val())||config.oddsDefault)-config.oddsDown;n<1||a<1?alert("배당은 1이하로 적용시킬 수 없습니다."):(t.val(n.toFixed(2)),o.val(a.toFixed(2)))},oddsDown:function(e){var t=$("#"+e+' [name="oddsHome"]'),o=$("#"+e+' [name="oddsAway"]'),n=(parseFloat(t.val())||config.oddsDefault)-config.oddsUp,a=(parseFloat(o.val())||config.oddsDefault)+config.oddsDown;n<1||a<1?alert("배당은 1이하로 적용시킬 수 없습니다."):(t.val(n.toFixed(2)),o.val(a.toFixed(2)))},select:function(){$("#sp-select").data().selected?($('input[name="gameId"]').each((function(){$(this).prop("checked","")})),$("#sp-select").data().selected=!1):($('input[name="gameId"]').each((function(){$(this).prop("checked","checked")})),$("#sp-select").data().selected=!0)},enabled:function(e){var t=$('input[name="gameId"]:checked'),o=t.length,n=[],a=e?"등록":"등록취소";return 0==o?(alert(String.format("{0} 하실 게임을 선택하여 주세요",a)),!1):!!confirm(String.format("선택하신 [{0}]경기를 {1} 하시겠습니까?",o,a))&&(t.each((function(){n.push($(this).val())})),void $.post(path+"/game/enabled",{gameIds:n,enabled:e}).done((function(e){e.success&&location.reload()})))},deleted:function(e){var t=$('input[name="gameId"]:checked'),o=t.length,n=[],a=e?"삭제":"복원";return 0==o?(alert(String.format("{0} 하실 게임을 선택하여 주세요",a)),!1):!!confirm(String.format("선택하신 [{0}]경기를 {1} 하시겠습니까?",o,a))&&(t.each((function(){n.push($(this).val())})),void $.post(path+"/game/deleted",{gameIds:n,enabled:e}).done((function(e){e.success&&location.reload()})))},reload:function(){$.post(path+"/game/reload")},reset:function(e){if(!confirm("정산 취소를 하시겠습니까?"))return!1;$.post(path+"/game/reset",{id:e}).done((function(e){e.success&&location.reload()}))}},sports={sortUp:function(e){$.ajax({url:path+"/config/sports/up",method:"post",data:{id:e}}).done((function(){location.reload()}))},sortDown:function(e){$.ajax({url:path+"/config/sports/down",method:"post",data:{id:e}}).done((function(){location.reload()}))},delete:function(e){confirm("삭제를 하시면 되살릴 수 없습니다.\n\n삭제를 하시겠습니까?")&&$.ajax({url:path+"/config/sports/delete",method:"post",data:{id:e}}).done((function(){location.reload()}))}},league={delete:function(e){confirm("삭제를 하시면 되살릴 수 없습니다.\n\n삭제를 하시겠습니까?")&&$.ajax({url:path+"/config/league/delete",method:"post",data:{id:e}}).done((function(){location.reload()}))}},member={enabled:function(e,t){t=$(t);$.ajax({url:path+"/member/update/enabled",method:"post",data:{userid:e}}).done((function(e){"Y"===e.value?(t.removeClass("color03").addClass("color04"),t.find("i").removeClass("fa-thumbs-o-down").addClass("fa-thumbs-o-up")):(t.removeClass("color04").addClass("color03"),t.find("i").removeClass("fa-thumbs-o-up").addClass("fa-thumbs-o-down"))}))},black:function(e,t){t=$(t);$.ajax({url:path+"/member/update/black",method:"post",data:{userid:e}}).done((function(e){"Y"===e.value?t.addClass("color03"):t.removeClass("color03")}))}},betting={win:function(e){if(!confirm("베팅을 적중처리 하시겠습니까?"))return!1;$.ajax({url:path+"/betting/win",method:"post",data:{betId:e}}).done((function(e){e.success&&setTimeout((function(){location.reload()}),1e3)}))},hit:function(e){if(!confirm("베팅을 적특처리 하시겠습니까?"))return!1;$.ajax({url:path+"/betting/hit",method:"post",data:{betId:e}}).done((function(e){e.success&&setTimeout((function(){location.reload()}),1e3)}))},lose:function(e){if(!confirm("베팅을 미적처리 하시겠습니까?"))return!1;$.ajax({url:path+"/betting/lose",method:"post",data:{betId:e}}).done((function(e){e.success&&setTimeout((function(){location.reload()}),1e3)}))},cancel:{bet:function(e){if(!confirm("베팅을 취소처리 하시겠습니까?"))return!1;$.ajax({url:path+"/betting/cancel",method:"post",data:{betId:e}}).done((function(e){e.success&&setTimeout((function(){location.reload()}),1e3)}))},item:function(e,t){if(!confirm("베팅을 취소하면 되살릴 수 없습니다.\n\n취소 하시겠습니까?"))return!1;$.ajax({url:path+"/betting/cancel/item",method:"post",data:{betId:e,itemId:t}}).done((function(e){e.success&&setTimeout((function(){location.reload()}),1e3)}))}}},auto={add:function(){if(!confirm("고객 응대를 등록하시겠습니까?"))return!1;$.ajax({url:path+"/customer/auto/add",method:"post",data:{name:$("#name").val(),title:$("#title").val(),contents:$("#contents").val()}}).done((function(e){e.success&&setTimeout((function(){location.reload()}),1e3)}))},enabled:function(e){$.ajax({url:path+"/customer/auto/enabled",method:"post",data:{id:e}}).done((function(t){t.success&&("Y"===t.value?($("#"+e+"-name").parent().addClass("color03"),$("#"+e+"-btn").addClass("btn01").text("ON")):($("#"+e+"-name").parent().removeClass("color03"),$("#"+e+"-btn").removeClass("btn01").text("OFF")))}))},update:function(e){$.ajax({url:path+"/customer/auto/update",method:"post",data:{id:e,name:$("#"+e+"-name").val(),title:$("#"+e+"-title").val(),contents:$("#"+e+"-contents").val()}})},delete:function(e){$.ajax({url:path+"/customer/auto/delete",method:"post",data:{id:e}}).done((function(e){e.success&&setTimeout((function(){location.reload()}),1e3)}))}},showMessage=function(e){$("#flashMessage div").html(e),$("#flashMessage").removeClass("error").stop(!0,!0).slideDown().delay(1e3).slideUp()},errorMessage=function(e){$("#flashMessage div").html(e),$("#flashMessage").addClass("error").stop(!0,!0).slideDown().delay(1e3).slideUp()},goPage=function(e){$("#page").val(e),$("#frm-search").submit()},goSearch=function(){$("#page").val(1),$("#frm-search").submit()};